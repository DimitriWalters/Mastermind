angular.module("app",[]).controller("MainCtrl",["$scope","Game",function(a,b){a.guess="";a.startGame=function(){var c=0;a.errorMessage="";a.bottomMessage="";
a.done=false;a.guesses=[];for(c=1;c<=12;c+=1){a.guesses.push({code:"#"+c+":"});}b.initializeGame();};a.makeGuess=function(){a.errorMessage="";if(a.guess.length!==4){a.errorMessage="Please enter a 4 digit number.";
}else{b.incrementNumberOfGuesses();a.guesses[b.getNumberOfGuesses()-1].code=b.stringifyGuess(a.guess);if(b.isCorrectCode(a.guess)){a.done=true;}else{if(b.isGameOver()){a.bottomMessage="You lost! The code was "+b.getCode()+".";
a.done=true;}}}a.guess="";};a.showCode=function(){a.bottomMessage="The code was "+b.getCode()+".";a.done=true;};a.validateNumber=function(){a.guess=a.guess.replace(/[^1-9\.]/g,"");
};a.startGame();}]).service("Game",function(){var c="",b=0;this.getCode=function(){return c;};this.getNumberOfGuesses=function(){return b;};this.incrementNumberOfGuesses=function(){b+=1;
};this.initializeGame=function(){var g=0,e=_.range(1,10),f=0;_(e).forEach(function(h){h.toString();});c="";b=0;for(f=0;f<4;f+=1){g=Math.floor(Math.random()*(9-f));
c+=e[g];e.splice(g,1);}};this.isCorrectCode=function(e){return e===c;};this.isGameOver=function(){return b===12;};function a(g){var e=0,f=0;for(f=0;f<g.length;
f+=1){if(g.charAt(f)===c.charAt(f)){e+=1;}}return e;}function d(g){var e=0,f=0;for(f=0;f<g.length;f+=1){if((g.charAt(f)!==c.charAt(f))&&(c.indexOf(g.charAt(f))!==-1)){e+=1;
}}return e;}this.stringifyGuess=function(f){var e="#"+b+": "+f+" : ";if(this.isCorrectCode(f)){e+="You won!";}else{e+=a(f)+" correct, "+d(f)+" wrong";}return e;
};});